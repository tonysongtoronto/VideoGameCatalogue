<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <h1 class="mb-4">{{ isNewGame ? 'Add New Game' : 'Edit Game' }}</h1>

      <div *ngIf="error" class="alert alert-danger alert-dismissible fade show" role="alert">
        {{ error }}
        <button type="button" class="btn-close" (click)="error = null"></button>
      </div>

      <div class="card">
        <div class="card-body">
          <form [formGroup]="gameForm" (ngSubmit)="onSubmit()">
            <div class="mb-3">
              <label for="title" class="form-label">Title *</label>
              <input
                type="text"
                class="form-control"
                id="title"
                formControlName="title"
                [class.is-invalid]="isFieldInvalid('title')"
                placeholder="Enter game title">
              <div class="invalid-feedback" *ngIf="isFieldInvalid('title')">
                Title is required (max 200 characters)
              </div>
            </div>

            <div class="mb-3">
              <label for="publisher" class="form-label">Publisher *</label>
              <input
                type="text"
                class="form-control"
                id="publisher"
                formControlName="publisher"
                [class.is-invalid]="isFieldInvalid('publisher')"
                placeholder="Enter publisher name">
              <div class="invalid-feedback" *ngIf="isFieldInvalid('publisher')">
                Publisher is required (max 100 characters)
              </div>
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="genre" class="form-label">Genre *</label>
                <input
                  type="text"
                  class="form-control"
                  id="genre"
                  formControlName="genre"
                  [class.is-invalid]="isFieldInvalid('genre')"
                  placeholder="e.g., Action, RPG, Strategy">
                <div class="invalid-feedback" *ngIf="isFieldInvalid('genre')">
                  Genre is required (max 50 characters)
                </div>
              </div>

              <div class="col-md-6 mb-3">
                <label for="platform" class="form-label">Platform *</label>
                <input
                  type="text"
                  class="form-control"
                  id="platform"
                  formControlName="platform"
                  [class.is-invalid]="isFieldInvalid('platform')"
                  placeholder="e.g., PC, PlayStation 5">
                <div class="invalid-feedback" *ngIf="isFieldInvalid('platform')">
                  Platform is required (max 50 characters)
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="releaseDate" class="form-label">Release Date *</label>
                <input
                  type="date"
                  class="form-control"
                  id="releaseDate"
                  formControlName="releaseDate"
                  [class.is-invalid]="isFieldInvalid('releaseDate')">
                <div class="invalid-feedback" *ngIf="isFieldInvalid('releaseDate')">
                  Release date is required
                </div>
              </div>

              <div class="col-md-6 mb-3">
                <label for="price" class="form-label">Price *</label>
                <div class="input-group">
                  <span class="input-group-text">$</span>
                  <input
                    type="number"
                    step="0.01"
                    class="form-control"
                    id="price"
                    formControlName="price"
                    [class.is-invalid]="isFieldInvalid('price')"
                    placeholder="0.00">
                  <div class="invalid-feedback" *ngIf="isFieldInvalid('price')">
                    Price is required and must be positive
                  </div>
                </div>
              </div>
            </div>

            <div class="d-flex gap-2 mt-4">
              <button
                type="submit"
                class="btn btn-primary"
                [disabled]="!gameForm.valid || loading">
                <span *ngIf="loading" class="spinner-border spinner-border-sm me-2"></span>
                {{ loading ? 'Saving...' : 'Save' }}
              </button>
              <button
                type="button"
                class="btn btn-secondary"
                (click)="cancel()"
                [disabled]="loading">
                Cancel
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
