<div class="edit-container">
  <div class="edit-card">
    <div class="edit-header">
      <h1 class="edit-title">{{ isNewGame ? '✨ Add New Game' : '✏️ Edit Game' }}</h1>
      <p class="edit-subtitle">{{ isNewGame ? 'Add a new game to your collection' : 'Update game information' }}</p>
    </div>

    <div *ngIf="error" class="error-banner">
      <span class="error-icon">⚠️</span>
      <span>{{ error }}</span>
      <button class="error-close" (click)="error = null">×</button>
    </div>

    <form [formGroup]="gameForm" (ngSubmit)="onSubmit()" class="game-form">
      <div class="form-section">
        <div class="form-group">
          <label for="title" class="form-label">
            <span class="label-text">Game Title</span>
            <span class="label-required">*</span>
          </label>
          <input
            type="text"
            class="form-input"
            id="title"
            formControlName="title"
            [class.input-error]="isFieldInvalid('title')"
            placeholder="Enter the game title">
          <div class="error-message" *ngIf="isFieldInvalid('title')">
            Title is required (max 200 characters)
          </div>
        </div>

        <div class="form-group">
          <label for="publisher" class="form-label">
            <span class="label-text">Publisher</span>
            <span class="label-required">*</span>
          </label>
          <input
            type="text"
            class="form-input"
            id="publisher"
            formControlName="publisher"
            [class.input-error]="isFieldInvalid('publisher')"
            placeholder="e.g., Nintendo, Sony, Microsoft">
          <div class="error-message" *ngIf="isFieldInvalid('publisher')">
            Publisher is required (max 100 characters)
          </div>
        </div>
      </div>

      <div class="form-section form-row">
        <div class="form-group">
          <label for="genre" class="form-label">
            <span class="label-text">Genre</span>
            <span class="label-required">*</span>
          </label>
          <select
            class="form-select"
            id="genre"
            formControlName="genre"
            [class.input-error]="isFieldInvalid('genre')">
            <option value="" disabled>Select a genre</option>
            <option *ngFor="let genre of genres" [value]="genre">{{ genre }}</option>
          </select>
          <div class="error-message" *ngIf="isFieldInvalid('genre')">
            Genre is required
          </div>
        </div>

        <div class="form-group">
          <label for="platform" class="form-label">
            <span class="label-text">Platform</span>
            <span class="label-required">*</span>
          </label>
          <select
            class="form-select"
            id="platform"
            formControlName="platform"
            [class.input-error]="isFieldInvalid('platform')">
            <option value="" disabled>Select a platform</option>
            <option *ngFor="let platform of platforms" [value]="platform">{{ platform }}</option>
          </select>
          <div class="error-message" *ngIf="isFieldInvalid('platform')">
            Platform is required
          </div>
        </div>
      </div>

      <div class="form-section form-row">
        <div class="form-group">
          <label for="releaseDate" class="form-label">
            <span class="label-text">Release Date</span>
            <span class="label-required">*</span>
          </label>
          <input
            type="date"
            class="form-input"
            id="releaseDate"
            formControlName="releaseDate"
            [class.input-error]="isFieldInvalid('releaseDate')">
          <div class="error-message" *ngIf="isFieldInvalid('releaseDate')">
            Release date is required
          </div>
        </div>

        <div class="form-group">
          <label for="price" class="form-label">
            <span class="label-text">Price</span>
            <span class="label-required">*</span>
          </label>
          <div class="input-group">
            <span class="input-prefix">$</span>
            <input
              type="number"
              step="0.01"
              class="form-input input-with-prefix"
              id="price"
              formControlName="price"
              [class.input-error]="isFieldInvalid('price')"
              placeholder="0.00">
          </div>
          <div class="error-message" *ngIf="isFieldInvalid('price')">
            Price is required and must be positive
          </div>
        </div>
      </div>

      <div class="form-actions">
        <button
          type="submit"
          class="btn btn-primary"
          [disabled]="!gameForm.valid || loading">
          <span *ngIf="loading" class="btn-spinner"></span>
          <span>{{ loading ? 'Saving...' : 'Save Game' }}</span>
        </button>
        <button
          type="button"
          class="btn btn-secondary"
          (click)="cancel()"
          [disabled]="loading">
          Cancel
        </button>
      </div>
    </form>
  </div>
</div>
